<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Transaction Manager ‚Äî Bank Accounts Dashboard</title>
  <link rel="stylesheet" href="Bank_Accounts_Style.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="Global_Master_Data_Export.js"></script>
</head>

<body>
  <header class="header">
    <div class="header-left">
      <h1 class="header-title">Transaction Manager ‚Äî Bank Accounts Dashboard</h1>
      <div class="header-buttons">
        <button class="excel" id="btnExportPDF">üìò Export PDF</button>
        <button class="primary" id="btnEditMode">‚úèÔ∏è Edit Mode</button>
        <button class="primary" id="btnDisplayMode" style="display:none;">üëÅÔ∏è Display Mode</button>
      </div>
    </div>
    <div class="header-right">
      <label class="theme-switch">
        <input type="checkbox" id="themeSwitch">
        <span class="slider"></span>
      </label>
      <button class="black" onclick="window.location.href='index.html'">‚Üê Back to Main Dashboard</button>
    </div>
  </header>

  <main>
    <!-- Account Tag Highlight Bar -->
    <section class="account-tag-bar" id="accountTagBar">
      <div class="account-tag-content">
        <label>Account Tag:</label>
        <select id="accountTagSelect"></select>
        <button class="primary" id="btnAddRecord">‚ûï Add Bank Account</button>
      </div>
    </section>

    <!-- Bank Records Container -->
    <section class="bank-records-container" id="bankRecordsContainer">
      <!-- Records will be dynamically added here -->
    </section>
  </main>

  <!-- Bank Record Modal -->
  <div id="bankModal" class="modal">
    <div class="modal-content bank-modal-content">
      <h3 id="modalTitle">Add Bank Account</h3>
      <form id="bankForm">
        <!-- Row 1: Institution (Bank Name), Country, Branch Address, Account Tag -->
        <div class="row2" style="grid-template-columns: 0.8fr 0.8fr 2.4fr 2fr; gap: 12px;">
          <div>
            <label>Bank</label>
            <select id="Bank_Institution" required></select>
          </div>
          <div>
            <label>Country</label>
            <select id="Bank_Country">
              <option value="">Select Country</option>
              <option value="India">India</option>
              <option value="Canada">Canada</option>
              <option value="US">US</option>
            </select>
          </div>
          <div>
            <label>Branch Address</label>
            <input type="text" id="Bank_Branch_Address" placeholder="123 Main St, Halifax, NS">
          </div>
          <div>
            <label>Account Tag</label>
            <select id="Bank_Ac_Tag" required></select>
          </div>
        </div>

        <!-- Row 2: Account Status, Account Type, Account Number -->
        <div class="row2" style="grid-template-columns: 1fr 1fr 1.5fr; gap: 12px;">
          <div>
            <label>Account Status</label>
            <select id="Bank_Account_Status">
              <option value="">Select Account Status</option>
            </select>
          </div>
          <div>
            <label>Account Type (Ac_Type)</label>
            <select id="Bank_Ac_Type" required></select>
          </div>
          <div>
            <label>Account Number</label>
            <input type="text" id="Bank_Account_Number" placeholder="123456789012">
          </div>
        </div>

        <!-- Row 3: Transit / IFSC, Institution / MICR, Minimum Balance Required -->
        <div class="row2" style="grid-template-columns: 1fr 1fr 2fr; gap: 12px;">
          <div>
            <label>Transit / IFSC</label>
            <input type="text" id="Bank_Transit_IFSC" placeholder="01234 / ABCD0123456">
          </div>
          <div>
            <label>Institution / MICR</label>
            <input type="text" id="Bank_Institution_MICR" placeholder="0003 / 123456789">
          </div>
          <div>
            <label>Minimum Balance Required</label>
            <input type="text" id="Bank_Min_Balance" placeholder="0.00">
          </div>
        </div>

        <!-- Holder Count Selection -->
        <div class="row-full">
          <label>Number of Holders (1-4)</label>
          <select id="Bank_Holder_Count" required>
            <option value="1">1 Holder</option>
            <option value="2">2 Holders</option>
            <option value="3">3 Holders</option>
            <option value="4">4 Holders</option>
          </select>
        </div>

        <!-- Dynamic Holders Section -->
        <div id="holdersContainer"></div>

        <!-- Nomination Section -->
        <div class="section-divider">Nomination</div>
        <div class="holder-section">
          <h4>Nominee</h4>
          <div class="holder-row">
            <div>
              <label>Nominee (Ac_Holder)</label>
              <select id="Bank_Nominee_Name"></select>
            </div>
            <div>
              <label>Nominee Name</label>
              <input type="text" id="Bank_Nominee_Name_Text" placeholder="Will auto-fill from dropdown">
            </div>
            <div>
              <label>Nominee_Email</label>
              <input type="email" id="Bank_Nominee_Email" placeholder="aashie@gmail.com">
            </div>
            <div>
              <label>Nominee_Phone</label>
              <input type="tel" id="Bank_Nominee_Phone" placeholder="+91 123-456-7890" title="Format: +country_code phone (e.g., +91 647-647-1234)">
            </div>
          </div>
        </div>

        <!-- Helpline Section -->
        <div class="section-divider">Helpline</div>
        <div class="row2" style="grid-template-columns: 1fr 1fr 1fr 1fr; gap: 12px;">
          <div>
            <label>Phone 1</label>
            <input type="tel" id="Bank_Helpline_Phone1" placeholder="+91 647-647-1234" title="Format: +country_code phone (e.g., +91 647-647-1234)">
          </div>
          <div>
            <label>Phone 2</label>
            <input type="tel" id="Bank_Helpline_Phone2" placeholder="+91 647-647-1234" title="Format: +country_code phone (e.g., +91 647-647-1234)">
          </div>
          <div>
            <label>Phone 3</label>
            <input type="tel" id="Bank_Helpline_Phone3" placeholder="+91 647-647-1234" title="Format: +country_code phone (e.g., +91 647-647-1234)">
          </div>
          <div>
            <label>Phone 4</label>
            <input type="tel" id="Bank_Helpline_Phone4" placeholder="+91 647-647-1234" title="Format: +country_code phone (e.g., +91 647-647-1234)">
          </div>
        </div>
        <div class="row2" style="grid-template-columns: 1fr 1fr 1fr 1fr; gap: 12px;">
          <div>
            <label>Email 1</label>
            <input type="email" id="Bank_Helpline_Email1">
          </div>
          <div>
            <label>Email 2</label>
            <input type="email" id="Bank_Helpline_Email2">
          </div>
          <div>
            <label>Email 3</label>
            <input type="email" id="Bank_Helpline_Email3">
          </div>
          <div>
            <label>Email 4</label>
            <input type="email" id="Bank_Helpline_Email4">
          </div>
        </div>
        <div class="row-full">
          <label>URL</label>
          <input type="url" id="Bank_Helpline_URL" placeholder="https://">
        </div>

        <!-- Notes Section -->
        <div class="section-divider">Notes</div>
        <div class="row-full">
          <label>Notes</label>
          <textarea id="Bank_Notes" rows="4"></textarea>
        </div>

        <div class="modal-actions">
          <button type="button" id="cancelBtn">Cancel</button>
          <button type="submit" id="saveBtn">Save</button>
        </div>
      </form>
    </div>
  </div>

  <script src="Bank_Accounts_Main.js"></script>
  <script>
    // Theme Switch
    const themeSwitch = document.getElementById('themeSwitch');
    const savedTheme = localStorage.getItem('bankTheme') || 'light';
    if (savedTheme === 'dark') {
      document.body.classList.add('dark');
      themeSwitch.checked = true;
    }
    themeSwitch.addEventListener('change', () => {
      document.body.classList.toggle('dark');
      localStorage.setItem('bankTheme', themeSwitch.checked ? 'dark' : 'light');
    });
  </script>
</body>
</html>

